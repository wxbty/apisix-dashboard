var __decorate=this&&this.__decorate||function(e,r,i,s){var o,t=arguments.length,c=t<3?r:null===s?s=Object.getOwnPropertyDescriptor(r,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)c=Reflect.decorate(e,r,i,s);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(c=(t<3?o(c):t>3?o(r,i,c):o(r,i))||c);return t>3&&c&&Object.defineProperty(r,i,c),c},__param=this&&this.__param||function(e,r){return function(i,s){r(i,s,e)}};import{DisposableStore}from"../../../base/common/lifecycle.js";import{localize}from"../../../nls.js";import{Extensions}from"../common/quickAccess.js";import{IQuickInputService}from"../common/quickInput.js";import{Registry}from"../../registry/common/platform.js";let HelpQuickAccessProvider=class e{constructor(e){this.quickInputService=e,this.registry=Registry.as(Extensions.Quickaccess)}provide(r){const i=new DisposableStore;i.add(r.onDidAccept((()=>{const[e]=r.selectedItems;e&&this.quickInputService.quickAccess.show(e.prefix,{preserveValue:!0})}))),i.add(r.onDidChangeValue((r=>{const i=this.registry.getQuickAccessProvider(r.substr(e.PREFIX.length));i&&i.prefix&&i.prefix!==e.PREFIX&&this.quickInputService.quickAccess.show(i.prefix,{preserveValue:!0})})));const{editorProviders:s,globalProviders:o}=this.getQuickAccessProviders();return r.items=0===s.length||0===o.length?[...0===s.length?o:s]:[{label:localize("globalCommands","global commands"),type:"separator"},...o,{label:localize("editorCommands","editor commands"),type:"separator"},...s],i}getQuickAccessProviders(){const r=[],i=[];for(const s of this.registry.getQuickAccessProviders().sort(((e,r)=>e.prefix.localeCompare(r.prefix))))if(s.prefix!==e.PREFIX)for(const e of s.helpEntries){const o=e.prefix||s.prefix,t=o||"\u2026";(e.needsEditor?i:r).push({prefix:o,label:t,ariaLabel:localize("helpPickAriaLabel","{0}, {1}",t,e.description),description:e.description})}return{editorProviders:i,globalProviders:r}}};HelpQuickAccessProvider.PREFIX="?",HelpQuickAccessProvider=__decorate([__param(0,IQuickInputService)],HelpQuickAccessProvider);export{HelpQuickAccessProvider};