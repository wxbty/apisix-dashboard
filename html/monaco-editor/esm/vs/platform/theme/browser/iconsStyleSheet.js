import{asCSSPropertyValue,asCSSUrl}from"../../../base/browser/dom.js";import{Emitter}from"../../../base/common/event.js";import{getIconRegistry}from"../common/iconRegistry.js";import{ThemeIcon}from"../common/themeService.js";export function getIconsStyleSheet(e){const t=new Emitter,o=getIconRegistry();return o.onDidChange((()=>t.fire())),null===e||void 0===e||e.onDidProductIconThemeChange((()=>t.fire())),{onDidChange:t.event,getCSS(){const t=e?e.getProductIconTheme():new UnthemedProductIconTheme,n={},r=e=>{const o=t.getIcon(e);if(!o)return;const r=o.font;return r?(n[r.id]=r.getDefinition(),`.codicon-${e.id}:before { content: '${o.fontCharacter}'; font-family: ${asCSSPropertyValue(r.id)}; }`):`.codicon-${e.id}:before { content: '${o.fontCharacter}'; }`},c=[];for(let e of o.getIcons()){const t=r(e);t&&c.push(t)}for(let e in n){const t=n[e];if(t){const o=t.weight?`font-weight: ${t.weight};`:"",n=t.style?`font-style: ${t.style};`:"",r=t.src.map((e=>`${asCSSUrl(e.location)} format('${e.format}')`)).join(", ");c.push(`@font-face { src: ${r}; font-family: ${asCSSPropertyValue(e)};${o}${n} font-display: block; }`)}}return c.join("\n")}}}export class UnthemedProductIconTheme{getIcon(e){const t=getIconRegistry();let o=e.defaults;while(ThemeIcon.isThemeIcon(o)){const e=t.getIcon(o.id);if(!e)return;o=e.defaults}return o}}