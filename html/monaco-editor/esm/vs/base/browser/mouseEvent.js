import*as browser from"./browser.js";import{IframeUtils}from"./iframe.js";import*as platform from"../common/platform.js";export class StandardMouseEvent{constructor(t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=0===t.button,this.middleButton=1===t.button,this.rightButton=2===t.button,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,"dblclick"===t.type&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,"number"===typeof t.pageX?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.posy=t.clientY+document.body.scrollTop+document.documentElement.scrollTop);let e=IframeUtils.getPositionOfChildWindowRelativeToAncestorWindow(self,t.view);this.posx-=e.left,this.posy-=e.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}export class StandardWheelEvent{constructor(t,e=0,s=0){if(this.browserEvent=t||null,this.target=t?t.target||t.targetNode||t.srcElement:null,this.deltaY=s,this.deltaX=e,t){let e=t,s=t;if("undefined"!==typeof e.wheelDeltaY)this.deltaY=e.wheelDeltaY/120;else if("undefined"!==typeof s.VERTICAL_AXIS&&s.axis===s.VERTICAL_AXIS)this.deltaY=-s.detail/3;else if("wheel"===t.type){const e=t;e.deltaMode===e.DOM_DELTA_LINE?browser.isFirefox&&!platform.isMacintosh?this.deltaY=-t.deltaY/3:this.deltaY=-t.deltaY:this.deltaY=-t.deltaY/40}if("undefined"!==typeof e.wheelDeltaX)browser.isSafari&&platform.isWindows?this.deltaX=-e.wheelDeltaX/120:this.deltaX=e.wheelDeltaX/120;else if("undefined"!==typeof s.HORIZONTAL_AXIS&&s.axis===s.HORIZONTAL_AXIS)this.deltaX=-t.detail/3;else if("wheel"===t.type){const e=t;e.deltaMode===e.DOM_DELTA_LINE?browser.isFirefox&&!platform.isMacintosh?this.deltaX=-t.deltaX/3:this.deltaX=-t.deltaX:this.deltaX=-t.deltaX/40}0===this.deltaY&&0===this.deltaX&&t.wheelDelta&&(this.deltaY=t.wheelDelta/120)}}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation()}}