import{isFirefox}from"../../browser.js";import{EventType as TouchEventType,Gesture}from"../../touch.js";import{$,addDisposableListener,append,clearNode,createStyleSheet,Dimension,EventHelper,EventType,getActiveElement,isAncestor,isInShadowDOM}from"../../dom.js";import{StandardKeyboardEvent}from"../../keyboardEvent.js";import{StandardMouseEvent}from"../../mouseEvent.js";import{ActionBar}from"../actionbar/actionbar.js";import{ActionViewItem,BaseActionViewItem}from"../actionbar/actionViewItems.js";import{formatRule}from"../codicons/codiconStyles.js";import{layout}from"../contextview/contextview.js";import{DomScrollableElement}from"../scrollbar/scrollableElement.js";import{EmptySubmenuAction,Separator,SubmenuAction}from"../../../common/actions.js";import{RunOnceScheduler}from"../../../common/async.js";import{Codicon}from"../../../common/codicons.js";import{stripIcons}from"../../../common/iconLabels.js";import{DisposableStore}from"../../../common/lifecycle.js";import{isLinux,isMacintosh}from"../../../common/platform.js";import*as strings from"../../../common/strings.js";export const MENU_MNEMONIC_REGEX=/\(&([^\s&])\)|(^|[^&])&([^\s&])/;export const MENU_ESCAPED_MNEMONIC_REGEX=/(&amp;)?(&amp;)([^\s&])/g;export var Direction;(function(t){t[t["Right"]=0]="Right",t[t["Left"]=1]="Left"})(Direction||(Direction={}));export class Menu extends ActionBar{constructor(t,e,n={}){t.classList.add("monaco-menu-container"),t.setAttribute("role","presentation");const i=document.createElement("div");i.classList.add("monaco-menu"),i.setAttribute("role","presentation"),super(i,{orientation:1,actionViewItemProvider:t=>this.doGetActionViewItem(t,n,o),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...isMacintosh||isLinux?[10]:[]],keyDown:!0}}),this.menuElement=i,this.actionsList.setAttribute("role","menu"),this.actionsList.tabIndex=0,this.menuDisposables=this._register(new DisposableStore),this.initializeOrUpdateStyleSheet(t,{}),this._register(Gesture.addTarget(i)),addDisposableListener(i,EventType.KEY_DOWN,(t=>{const e=new StandardKeyboardEvent(t);e.equals(2)&&t.preventDefault()})),n.enableMnemonics&&this.menuDisposables.add(addDisposableListener(i,EventType.KEY_DOWN,(t=>{const e=t.key.toLocaleLowerCase();if(this.mnemonics.has(e)){EventHelper.stop(t,!0);const n=this.mnemonics.get(e);if(1===n.length&&(n[0]instanceof SubmenuMenuActionViewItem&&n[0].container&&this.focusItemByElement(n[0].container),n[0].onClick(t)),n.length>1){const t=n.shift();t&&t.container&&(this.focusItemByElement(t.container),n.push(t)),this.mnemonics.set(e,n)}}}))),isLinux&&this._register(addDisposableListener(i,EventType.KEY_DOWN,(t=>{const e=new StandardKeyboardEvent(t);e.equals(14)||e.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),EventHelper.stop(t,!0)):(e.equals(13)||e.equals(12))&&(this.focusedItem=0,this.focusPrevious(),EventHelper.stop(t,!0))}))),this._register(addDisposableListener(this.domNode,EventType.MOUSE_OUT,(t=>{let e=t.relatedTarget;isAncestor(e,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),t.stopPropagation())}))),this._register(addDisposableListener(this.actionsList,EventType.MOUSE_OVER,(t=>{let e=t.target;if(e&&isAncestor(e,this.actionsList)&&e!==this.actionsList){while(e.parentElement!==this.actionsList&&null!==e.parentElement)e=e.parentElement;if(e.classList.contains("action-item")){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}}}))),this._register(Gesture.addTarget(this.actionsList)),this._register(addDisposableListener(this.actionsList,TouchEventType.Tap,(t=>{let e=t.initialTarget;if(e&&isAncestor(e,this.actionsList)&&e!==this.actionsList){while(e.parentElement!==this.actionsList&&null!==e.parentElement)e=e.parentElement;if(e.classList.contains("action-item")){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}}})));let o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new DomScrollableElement(i,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const s=this.scrollableElement.getDomNode();s.style.position="",this._register(addDisposableListener(i,TouchEventType.Change,(t=>{EventHelper.stop(t,!0);const e=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:e-t.translationY})}))),this._register(addDisposableListener(s,EventType.MOUSE_UP,(t=>{t.preventDefault()}))),i.style.maxHeight=`${Math.max(10,window.innerHeight-t.getBoundingClientRect().top-35)}px`,e=e.filter((t=>{var e;return!(null===(e=n.submenuIds)||void 0===e?void 0:e.has(t.id))||(console.warn(`Found submenu cycle: ${t.id}`),!1)})),this.push(e,{icon:!0,label:!0,isMenu:!0}),t.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter((t=>!(t instanceof MenuSeparatorActionViewItem))).forEach(((t,e,n)=>{t.updatePositionInSet(e+1,n.length)}))}initializeOrUpdateStyleSheet(t,e){this.styleSheet||(isInShadowDOM(t)?this.styleSheet=createStyleSheet(t):(Menu.globalStyleSheet||(Menu.globalStyleSheet=createStyleSheet()),this.styleSheet=Menu.globalStyleSheet)),this.styleSheet.textContent=getMenuWidgetCSS(e)}style(t){const e=this.getContainer();this.initializeOrUpdateStyleSheet(e,t);const n=t.foregroundColor?`${t.foregroundColor}`:"",i=t.backgroundColor?`${t.backgroundColor}`:"",o=t.borderColor?`1px solid ${t.borderColor}`:"",s=t.shadowColor?`0 2px 4px ${t.shadowColor}`:"";e.style.border=o,this.domNode.style.color=n,this.domNode.style.backgroundColor=i,e.style.boxShadow=s,this.viewItems&&this.viewItems.forEach((e=>{(e instanceof BaseMenuActionViewItem||e instanceof MenuSeparatorActionViewItem)&&e.style(t)}))}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(t){const e=this.focusedItem;this.setFocusedItem(t),e!==this.focusedItem&&this.updateFocus()}setFocusedItem(t){for(let e=0;e<this.actionsList.children.length;e++){let n=this.actionsList.children[e];if(t===n){this.focusedItem=e;break}}}updateFocus(t){super.updateFocus(t,!0,!0),"undefined"!==typeof this.focusedItem&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(t,e,n){if(t instanceof Separator)return new MenuSeparatorActionViewItem(e.context,t,{icon:!0});if(t instanceof SubmenuAction){const i=new SubmenuMenuActionViewItem(t,t.actions,n,Object.assign(Object.assign({},e),{submenuIds:new Set([...e.submenuIds||[],t.id])}));if(e.enableMnemonics){const t=i.getMnemonic();if(t&&i.isEnabled()){let e=[];this.mnemonics.has(t)&&(e=this.mnemonics.get(t)),e.push(i),this.mnemonics.set(t,e)}}return i}{const n={enableMnemonics:e.enableMnemonics,useEventAsContext:e.useEventAsContext};if(e.getKeyBinding){const i=e.getKeyBinding(t);if(i){const t=i.getLabel();t&&(n.keybinding=t)}}const i=new BaseMenuActionViewItem(e.context,t,n);if(e.enableMnemonics){const t=i.getMnemonic();if(t&&i.isEnabled()){let e=[];this.mnemonics.has(t)&&(e=this.mnemonics.get(t)),e.push(i),this.mnemonics.set(t,e)}}return i}}}class BaseMenuActionViewItem extends BaseActionViewItem{constructor(t,e,n={}){if(n.isMenu=!0,super(e,e,n),this.options=n,this.options.icon=void 0!==n.icon&&n.icon,this.options.label=void 0===n.label||n.label,this.cssClass="",this.options.label&&n.enableMnemonics){let t=this.getAction().label;if(t){let e=MENU_MNEMONIC_REGEX.exec(t);e&&(this.mnemonic=(e[1]?e[1]:e[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new RunOnceScheduler((()=>{this.element&&(this._register(addDisposableListener(this.element,EventType.MOUSE_UP,(t=>{if(EventHelper.stop(t,!0),isFirefox){const e=new StandardMouseEvent(t);if(e.rightButton)return;this.onClick(t)}else setTimeout((()=>{this.onClick(t)}),0)}))),this._register(addDisposableListener(this.element,EventType.CONTEXT_MENU,(t=>{EventHelper.stop(t,!0)}))))}),100),this._register(this.runOnceToEnableMouseUp)}render(t){super.render(t),this.element&&(this.container=t,this.item=append(this.element,$("a.action-menu-item")),this._action.id===Separator.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=append(this.item,$("span.menu-item-check"+Codicon.menuSelection.cssSelector)),this.check.setAttribute("role","none"),this.label=append(this.item,$("span.action-label")),this.options.label&&this.options.keybinding&&(append(this.item,$("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item&&this.item.focus(),this.applyStyle()}updatePositionInSet(t,e){this.item&&(this.item.setAttribute("aria-posinset",`${t}`),this.item.setAttribute("aria-setsize",`${e}`))}updateLabel(){if(this.label&&this.options.label){clearNode(this.label);let t=stripIcons(this.getAction().label);if(t){const e=cleanMnemonic(t);this.options.enableMnemonics||(t=e),this.label.setAttribute("aria-label",e.replace(/&&/g,"&"));const n=MENU_MNEMONIC_REGEX.exec(t);if(n){t=strings.escape(t),MENU_ESCAPED_MNEMONIC_REGEX.lastIndex=0;let e=MENU_ESCAPED_MNEMONIC_REGEX.exec(t);while(e&&e[1])e=MENU_ESCAPED_MNEMONIC_REGEX.exec(t);const i=t=>t.replace(/&amp;&amp;/g,"&amp;");e?this.label.append(strings.ltrim(i(t.substr(0,e.index))," "),$("u",{"aria-hidden":"true"},e[3]),strings.rtrim(i(t.substr(e.index+e[0].length))," ")):this.label.innerText=i(t).trim(),this.item&&this.item.setAttribute("aria-keyshortcuts",(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.getAction().class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.getAction().enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const t=this.getAction().checked;this.item.classList.toggle("checked",!!t),void 0!==t?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",t?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){if(!this.menuStyle)return;const t=this.element&&this.element.classList.contains("focused"),e=t&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=t&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,i=t&&this.menuStyle.selectionBorderColor?`thin solid ${this.menuStyle.selectionBorderColor}`:"";this.item&&(this.item.style.color=e?e.toString():"",this.item.style.backgroundColor=n?n.toString():""),this.check&&(this.check.style.color=e?e.toString():""),this.container&&(this.container.style.border=i)}style(t){this.menuStyle=t,this.applyStyle()}}class SubmenuMenuActionViewItem extends BaseMenuActionViewItem{constructor(t,e,n,i){super(t,t,i),this.submenuActions=e,this.parentData=n,this.submenuOptions=i,this.mysubmenu=null,this.submenuDisposables=this._register(new DisposableStore),this.mouseOver=!1,this.expandDirection=i&&void 0!==i.expandDirection?i.expandDirection:Direction.Right,this.showScheduler=new RunOnceScheduler((()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))}),250),this.hideScheduler=new RunOnceScheduler((()=>{this.element&&!isAncestor(getActiveElement(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))}),750)}render(t){super.render(t),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=append(this.item,$("span.submenu-indicator"+Codicon.menuSubmenu.cssSelector)),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(addDisposableListener(this.element,EventType.KEY_UP,(t=>{let e=new StandardKeyboardEvent(t);(e.equals(17)||e.equals(3))&&(EventHelper.stop(t,!0),this.createSubmenu(!0))}))),this._register(addDisposableListener(this.element,EventType.KEY_DOWN,(t=>{let e=new StandardKeyboardEvent(t);getActiveElement()===this.item&&(e.equals(17)||e.equals(3))&&EventHelper.stop(t,!0)}))),this._register(addDisposableListener(this.element,EventType.MOUSE_OVER,(t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())}))),this._register(addDisposableListener(this.element,EventType.MOUSE_LEAVE,(t=>{this.mouseOver=!1}))),this._register(addDisposableListener(this.element,EventType.FOCUS_OUT,(t=>{this.element&&!isAncestor(getActiveElement(),this.element)&&this.hideScheduler.schedule()}))),this._register(this.parentData.parent.onScroll((()=>{this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!1)}))))}updateEnabled(){}onClick(t){EventHelper.stop(t,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(t){if(this.parentData.submenu&&(t||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch(e){}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(t,e,n,i){const o={top:0,left:0};return o.left=layout(t.width,e.width,{position:i===Direction.Right?0:1,offset:n.left,size:n.width}),o.left>=n.left&&o.left<n.left+n.width&&(n.left+10+e.width<=t.width&&(o.left=n.left+10),n.top+=10,n.height=0),o.top=layout(t.height,e.height,{position:0,offset:n.top,size:0}),o.top+e.height===n.top&&o.top+n.height+e.height<=t.height&&(o.top+=n.height),o}createSubmenu(t=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=append(this.element,$("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const e=getComputedStyle(this.parentData.parent.domNode),n=parseFloat(e.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new Menu(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new EmptySubmenuAction],this.submenuOptions),this.menuStyle&&this.parentData.submenu.style(this.menuStyle);const i=this.element.getBoundingClientRect(),o={top:i.top-n,left:i.left,height:i.height+2*n,width:i.width},s=this.submenuContainer.getBoundingClientRect(),{top:a,left:r}=this.calculateSubmenuMenuLayout(new Dimension(window.innerWidth,window.innerHeight),Dimension.lift(s),o,this.expandDirection);this.submenuContainer.style.left=r-s.left+"px",this.submenuContainer.style.top=a-s.top+"px",this.submenuDisposables.add(addDisposableListener(this.submenuContainer,EventType.KEY_UP,(t=>{let e=new StandardKeyboardEvent(t);e.equals(15)&&(EventHelper.stop(t,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))}))),this.submenuDisposables.add(addDisposableListener(this.submenuContainer,EventType.KEY_DOWN,(t=>{let e=new StandardKeyboardEvent(t);e.equals(15)&&EventHelper.stop(t,!0)}))),this.submenuDisposables.add(this.parentData.submenu.onDidCancel((()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)}))),this.parentData.submenu.focus(t),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(t){var e;this.item&&(null===(e=this.item)||void 0===e||e.setAttribute("aria-expanded",t))}applyStyle(){if(super.applyStyle(),!this.menuStyle)return;const t=this.element&&this.element.classList.contains("focused"),e=t&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=e?`${e}`:""),this.parentData.submenu&&this.parentData.submenu.style(this.menuStyle)}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class MenuSeparatorActionViewItem extends ActionViewItem{style(t){this.label&&(this.label.style.borderBottomColor=t.separatorColor?`${t.separatorColor}`:"")}}export function cleanMnemonic(t){const e=MENU_MNEMONIC_REGEX,n=e.exec(t);if(!n)return t;const i=!n[1];return t.replace(e,i?"$2$3":"").trim()}function getMenuWidgetCSS(t){let e=`\n.monaco-menu {\n\tfont-size: 13px;\n\n}\n\n${formatRule(Codicon.menuSelection)}\n${formatRule(Codicon.menuSubmenu)}\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar.animated .action-item.active {\n\ttransform: scale(1.272019649, 1.272019649); /* 1.272019649 = \u221a\u03c6 */\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\topacity: 0.4;\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid #bbb;\n\tpadding-top: 1px;\n\tmargin-left: .8em;\n\tmargin-right: .8em;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tpadding: 0.5em 0 0 0;\n\tmargin-bottom: 0.5em;\n\twidth: 100%;\n\theight: 0px !important;\n\tmargin-left: .8em !important;\n\tmargin-right: .8em !important;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tborder: thin solid transparent; /* prevents jumping behaviour on hover or focus */\n}\n\n\n/* High Contrast Theming */\n:host-context(.hc-black) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: .5em 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 1.8em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tpadding: 0.2em 0 0 0;\n\tmargin-bottom: 0.2em;\n}\n\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}\n\n/* Arrows */\n.monaco-scrollable-element > .scrollbar > .scra {\n\tcursor: pointer;\n\tfont-size: 11px !important;\n}\n\n.monaco-scrollable-element > .visible {\n\topacity: 1;\n\n\t/* Background rule added for IE9 - to allow clicks on dom node */\n\tbackground:rgba(0,0,0,0);\n\n\ttransition: opacity 100ms linear;\n}\n.monaco-scrollable-element > .invisible {\n\topacity: 0;\n\tpointer-events: none;\n}\n.monaco-scrollable-element > .invisible.fade {\n\ttransition: opacity 800ms linear;\n}\n\n/* Scrollable Content Inset Shadow */\n.monaco-scrollable-element > .shadow {\n\tposition: absolute;\n\tdisplay: none;\n}\n.monaco-scrollable-element > .shadow.top {\n\tdisplay: block;\n\ttop: 0;\n\tleft: 3px;\n\theight: 3px;\n\twidth: 100%;\n}\n.monaco-scrollable-element > .shadow.left {\n\tdisplay: block;\n\ttop: 3px;\n\tleft: 0;\n\theight: 100%;\n\twidth: 3px;\n}\n.monaco-scrollable-element > .shadow.top-left-corner {\n\tdisplay: block;\n\ttop: 0;\n\tleft: 0;\n\theight: 3px;\n\twidth: 3px;\n}\n`;const n=t.scrollbarShadow;n&&(e+=`\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tbox-shadow: ${n} 0 6px 6px -6px inset;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tbox-shadow: ${n} 6px 0 6px -6px inset;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\tbox-shadow: ${n} 6px 6px 6px -6px inset;\n\t\t\t}\n\t\t`);const i=t.scrollbarSliderBackground;i&&(e+=`\n\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\tbackground: ${i};\n\t\t\t}\n\t\t`);const o=t.scrollbarSliderHoverBackground;o&&(e+=`\n\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\tbackground: ${o};\n\t\t\t}\n\t\t`);const s=t.scrollbarSliderActiveBackground;return s&&(e+=`\n\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\tbackground: ${s};\n\t\t\t}\n\t\t`),e}