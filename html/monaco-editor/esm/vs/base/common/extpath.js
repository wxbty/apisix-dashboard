import{normalize,posix,sep}from"./path.js";import{isWindows}from"./platform.js";import{startsWithIgnoreCase}from"./strings.js";export function isPathSeparator(t){return 47===t||92===t}export function toSlashes(t){return t.replace(/[\\/]/g,posix.sep)}export function toPosixPath(t){return-1===t.indexOf("/")&&(t=toSlashes(t)),/^[a-zA-Z]:(\/|$)/.test(t)&&(t="/"+t),t}export function getRoot(t,r=posix.sep){if(!t)return"";const e=t.length,o=t.charCodeAt(0);if(isPathSeparator(o)){if(isPathSeparator(t.charCodeAt(1))&&!isPathSeparator(t.charCodeAt(2))){let o=3;const i=o;for(;o<e;o++)if(isPathSeparator(t.charCodeAt(o)))break;if(i!==o&&!isPathSeparator(t.charCodeAt(o+1)))for(o+=1;o<e;o++)if(isPathSeparator(t.charCodeAt(o)))return t.slice(0,o+1).replace(/[\\/]/g,r)}return r}if(isWindowsDriveLetter(o)&&58===t.charCodeAt(1))return isPathSeparator(t.charCodeAt(2))?t.slice(0,2)+r:t.slice(0,2);let i=t.indexOf("://");if(-1!==i)for(i+=3;i<e;i++)if(isPathSeparator(t.charCodeAt(i)))return t.slice(0,i+1);return""}export function isEqualOrParent(t,r,e,o=sep){if(t===r)return!0;if(!t||!r)return!1;if(r.length>t.length)return!1;if(e){const e=startsWithIgnoreCase(t,r);if(!e)return!1;if(r.length===t.length)return!0;let i=r.length;return r.charAt(r.length-1)===o&&i--,t.charAt(i)===o}return r.charAt(r.length-1)!==o&&(r+=o),0===t.indexOf(r)}export function isWindowsDriveLetter(t){return t>=65&&t<=90||t>=97&&t<=122}export function isRootOrDriveLetter(t){const r=normalize(t);return isWindows?!(t.length>3)&&(hasDriveLetter(r)&&(2===t.length||92===r.charCodeAt(2))):r===posix.sep}export function hasDriveLetter(t,r){const e=void 0!==r?r:isWindows;return!!e&&(isWindowsDriveLetter(t.charCodeAt(0))&&58===t.charCodeAt(1))}