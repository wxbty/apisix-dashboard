import*as platform from"../../../base/common/platform.js";import{EditorZoom}from"./editorZoom.js";const GOLDEN_LINE_HEIGHT_RATIO=platform.isMacintosh?1.5:1.35,MINIMUM_LINE_HEIGHT=8;export class BareFontInfo{constructor(t){this._bareFontInfoBrand=void 0,this.pixelRatio=t.pixelRatio,this.fontFamily=String(t.fontFamily),this.fontWeight=String(t.fontWeight),this.fontSize=t.fontSize,this.fontFeatureSettings=t.fontFeatureSettings,this.lineHeight=0|t.lineHeight,this.letterSpacing=t.letterSpacing}static createFromValidatedSettings(t,i,e){const a=t.get(43),h=t.get(47),o=t.get(46),s=t.get(45),n=t.get(59),r=t.get(56);return BareFontInfo._create(a,h,o,s,n,r,i,e)}static _create(t,i,e,a,h,o,s,n){0===h?h=GOLDEN_LINE_HEIGHT_RATIO*e:h<MINIMUM_LINE_HEIGHT&&(h*=e),h=Math.round(h),h<MINIMUM_LINE_HEIGHT&&(h=MINIMUM_LINE_HEIGHT);const r=1+(n?0:.1*EditorZoom.getZoomLevel());return e*=r,h*=r,new BareFontInfo({pixelRatio:s,fontFamily:t,fontWeight:i,fontSize:e,fontFeatureSettings:a,lineHeight:h,letterSpacing:o})}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(t){const i=BareFontInfo._wrapInQuotes(this.fontFamily);return t&&this.fontFamily!==t?`${i}, ${t}`:i}static _wrapInQuotes(t){return/[,"']/.test(t)?t:/[+ ]/.test(t)?`"${t}"`:t}}export const SERIALIZED_FONT_INFO_VERSION=1;export class FontInfo extends BareFontInfo{constructor(t,i){super(t),this._editorStylingBrand=void 0,this.version=SERIALIZED_FONT_INFO_VERSION,this.isTrusted=i,this.isMonospace=t.isMonospace,this.typicalHalfwidthCharacterWidth=t.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=t.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=t.canUseHalfwidthRightwardsArrow,this.spaceWidth=t.spaceWidth,this.middotWidth=t.middotWidth,this.wsmiddotWidth=t.wsmiddotWidth,this.maxDigitWidth=t.maxDigitWidth}equals(t){return this.fontFamily===t.fontFamily&&this.fontWeight===t.fontWeight&&this.fontSize===t.fontSize&&this.fontFeatureSettings===t.fontFeatureSettings&&this.lineHeight===t.lineHeight&&this.letterSpacing===t.letterSpacing&&this.typicalHalfwidthCharacterWidth===t.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===t.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===t.canUseHalfwidthRightwardsArrow&&this.spaceWidth===t.spaceWidth&&this.middotWidth===t.middotWidth&&this.wsmiddotWidth===t.wsmiddotWidth&&this.maxDigitWidth===t.maxDigitWidth}}