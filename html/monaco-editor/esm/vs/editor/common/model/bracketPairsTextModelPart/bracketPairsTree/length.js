import{splitLines}from"../../../../../base/common/strings.js";import{Range}from"../../../core/range.js";export class LengthObj{constructor(t,n){this.lineCount=t,this.columnCount=n}toString(){return`${this.lineCount},${this.columnCount}`}}LengthObj.zero=new LengthObj(0,0);export function lengthDiff(t,n,o,e){return t!==o?toLength(o-t,e):toLength(0,e-n)}export const lengthZero=0;export function lengthIsZero(t){return 0===t}const factor=Math.pow(2,26);export function toLength(t,n){return t*factor+n}export function lengthToObj(t){const n=t,o=Math.floor(n/factor),e=n-o*factor;return new LengthObj(o,e)}export function lengthGetLineCount(t){return Math.floor(t/factor)}export function lengthGetColumnCountIfZeroLineCount(t){return t}export function lengthAdd(t,n){return n<factor?t+n:t-t%factor+n}export function lengthDiffNonNegative(t,n){const o=t,e=n,r=e-o;if(r<=0)return lengthZero;const u=Math.floor(o/factor),c=Math.floor(e/factor),f=e-c*factor;if(u===c){const t=o-u*factor;return toLength(0,f-t)}return toLength(c-u,f)}export function lengthLessThan(t,n){return t<n}export function lengthLessThanEqual(t,n){return t<=n}export function lengthGreaterThanEqual(t,n){return t>=n}export function positionToLength(t){return toLength(t.lineNumber-1,t.column-1)}export function lengthsToRange(t,n){const o=t,e=Math.floor(o/factor),r=o-e*factor,u=n,c=Math.floor(u/factor),f=u-c*factor;return new Range(e+1,r+1,c+1,f+1)}export function lengthOfString(t){const n=splitLines(t);return toLength(n.length-1,n[n.length-1].length)}