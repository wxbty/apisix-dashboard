var __decorate=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var d=t.length-1;d>=0;d--)(n=t[d])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r},__param=this&&this.__param||function(t,e){return function(o,i){e(o,i,t)}};import{IContextKeyService,RawContextKey}from"../../../../platform/contextkey/common/contextkey.js";let WordContextKey=class t{constructor(e,o){this._editor=e,this._enabled=!1,this._ckAtEnd=t.AtEnd.bindTo(o),this._configListener=this._editor.onDidChangeConfiguration((t=>t.hasChanged(111)&&this._update())),this._update()}dispose(){var t;this._configListener.dispose(),null===(t=this._selectionListener)||void 0===t||t.dispose(),this._ckAtEnd.reset()}_update(){const t="on"===this._editor.getOption(111);if(this._enabled!==t)if(this._enabled=t,this._enabled){const t=()=>{if(!this._editor.hasModel())return void this._ckAtEnd.set(!1);const t=this._editor.getModel(),e=this._editor.getSelection(),o=t.getWordAtPosition(e.getStartPosition());o?this._ckAtEnd.set(o.endColumn===e.getStartPosition().column):this._ckAtEnd.set(!1)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};WordContextKey.AtEnd=new RawContextKey("atEndOfWord",!1),WordContextKey=__decorate([__param(1,IContextKeyService)],WordContextKey);export{WordContextKey};