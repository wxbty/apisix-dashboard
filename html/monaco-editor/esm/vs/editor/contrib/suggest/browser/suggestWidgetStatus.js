var __decorate=this&&this.__decorate||function(t,e,i,s){var o,n=arguments.length,r=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(n<3?o(r):n>3?o(e,i,r):o(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r},__param=this&&this.__param||function(t,e){return function(i,s){e(i,s,t)}};import*as dom from"../../../../base/browser/dom.js";import{ActionBar}from"../../../../base/browser/ui/actionbar/actionbar.js";import{DisposableStore}from"../../../../base/common/lifecycle.js";import{suggestWidgetStatusbarMenu}from"./suggest.js";import{localize}from"../../../../nls.js";import{MenuEntryActionViewItem}from"../../../../platform/actions/browser/menuEntryActionViewItem.js";import{IMenuService,MenuItemAction}from"../../../../platform/actions/common/actions.js";import{IContextKeyService}from"../../../../platform/contextkey/common/contextkey.js";import{IInstantiationService}from"../../../../platform/instantiation/common/instantiation.js";class StatusBarViewItem extends MenuEntryActionViewItem{updateLabel(){const t=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!t)return super.updateLabel();this.label&&(this.label.textContent=localize("ddd","{0} ({1})",this._action.label,StatusBarViewItem.symbolPrintEnter(t)))}static symbolPrintEnter(t){var e;return null===(e=t.getLabel())||void 0===e?void 0:e.replace(/\benter\b/gi,"\u23ce")}}let SuggestWidgetStatus=class{constructor(t,e,i,s){this._menuService=i,this._contextKeyService=s,this._menuDisposables=new DisposableStore,this.element=dom.append(t,dom.$(".suggest-status-bar"));const o=t=>t instanceof MenuItemAction?e.createInstance(StatusBarViewItem,t,void 0):void 0;this._leftActions=new ActionBar(this.element,{actionViewItemProvider:o}),this._rightActions=new ActionBar(this.element,{actionViewItemProvider:o}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const t=this._menuService.createMenu(suggestWidgetStatusbarMenu,this._contextKeyService),e=()=>{const e=[],i=[];for(let[s,o]of t.getActions())"left"===s?e.push(...o):i.push(...o);this._leftActions.clear(),this._leftActions.push(e),this._rightActions.clear(),this._rightActions.push(i)};this._menuDisposables.add(t.onDidChange((()=>e()))),this._menuDisposables.add(t)}hide(){this._menuDisposables.clear()}};SuggestWidgetStatus=__decorate([__param(1,IInstantiationService),__param(2,IMenuService),__param(3,IContextKeyService)],SuggestWidgetStatus);export{SuggestWidgetStatus};