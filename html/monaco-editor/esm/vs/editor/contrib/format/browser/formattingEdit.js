import{EditOperation}from"../../../common/core/editOperation.js";import{Range}from"../../../common/core/range.js";export class FormattingEdit{static _handleEolEdits(e,t){let o,a=[];for(let n of t)"number"===typeof n.eol&&(o=n.eol),n.range&&"string"===typeof n.text&&a.push(n);return"number"===typeof o&&e.hasModel()&&e.getModel().pushEOL(o),a}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const o=e.getModel(),a=o.validateRange(t.range),n=o.getFullModelRange();return n.equalsRange(a)}static execute(e,t,o){o&&e.pushUndoStop();const a=FormattingEdit._handleEolEdits(e,t);1===a.length&&FormattingEdit._isFullModelReplaceEdit(e,a[0])?e.executeEdits("formatEditsCommand",a.map((e=>EditOperation.replace(Range.lift(e.range),e.text)))):e.executeEdits("formatEditsCommand",a.map((e=>EditOperation.replaceMove(Range.lift(e.range),e.text)))),o&&e.pushUndoStop()}}