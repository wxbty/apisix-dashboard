var __decorate=this&&this.__decorate||function(e,t,o,r){var i,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(s=(n<3?i(s):n>3?i(t,o,s):i(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s},__param=this&&this.__param||function(e,t){return function(o,r){t(o,r,e)}};import{windowOpenNoOpener}from"../../../base/browser/dom.js";import{Schemas}from"../../../base/common/network.js";import{AbstractCodeEditorService}from"../../browser/services/abstractCodeEditorService.js";import{ICodeEditorService}from"../../browser/services/codeEditorService.js";import{IContextKeyService}from"../../../platform/contextkey/common/contextkey.js";import{registerSingleton}from"../../../platform/instantiation/common/extensions.js";import{IThemeService}from"../../../platform/theme/common/themeService.js";let StandaloneCodeEditorService=class extends AbstractCodeEditorService{constructor(e,t){super(t),this.onCodeEditorAdd((()=>this._checkContextKey())),this.onCodeEditorRemove((()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}openCodeEditor(e,t,o){return t?Promise.resolve(this.doOpenEditor(t,e)):Promise.resolve(null)}doOpenEditor(e,t){const o=this.findModel(e,t.resource);if(!o){if(t.resource){const o=t.resource.scheme;if(o===Schemas.http||o===Schemas.https)return windowOpenNoOpener(t.resource.toString()),e}return null}const r=t.options?t.options.selection:null;if(r)if("number"===typeof r.endLineNumber&&"number"===typeof r.endColumn)e.setSelection(r),e.revealRangeInCenter(r,1);else{const t={lineNumber:r.startLineNumber,column:r.startColumn};e.setPosition(t),e.revealPositionInCenter(t,1)}return e}findModel(e,t){const o=e.getModel();return o&&o.uri.toString()!==t.toString()?null:o}};StandaloneCodeEditorService=__decorate([__param(0,IContextKeyService),__param(1,IThemeService)],StandaloneCodeEditorService);export{StandaloneCodeEditorService};registerSingleton(ICodeEditorService,StandaloneCodeEditorService);