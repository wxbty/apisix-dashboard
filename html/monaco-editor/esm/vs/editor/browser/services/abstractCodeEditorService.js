var __decorate=this&&this.__decorate||function(e,t,o,i){var r,s=arguments.length,d=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)d=Reflect.decorate(e,t,o,i);else for(var n=e.length-1;n>=0;n--)(r=e[n])&&(d=(s<3?r(d):s>3?r(t,o,d):r(t,o))||d);return s>3&&d&&Object.defineProperty(t,o,d),d},__param=this&&this.__param||function(e,t){return function(o,i){t(o,i,e)}};import{Emitter}from"../../../base/common/event.js";import{Disposable}from"../../../base/common/lifecycle.js";import{IThemeService}from"../../../platform/theme/common/themeService.js";let AbstractCodeEditorService=class extends Disposable{constructor(e){super(),this._themeService=e,this._onCodeEditorAdd=this._register(new Emitter),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new Emitter),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onDiffEditorAdd=this._register(new Emitter),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new Emitter),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map((e=>this._codeEditors[e]))}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map((e=>this._diffEditors[e]))}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const o of t){if(o.hasTextFocus())return o;o.hasWidgetFocus()&&(e=o)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach((t=>t.removeDecorations(e)))))}setModelProperty(e,t,o){const i=e.toString();let r;this._modelProperties.has(i)?r=this._modelProperties.get(i):(r=new Map,this._modelProperties.set(i,r)),r.set(t,o)}getModelProperty(e,t){const o=e.toString();if(this._modelProperties.has(o)){const e=this._modelProperties.get(o);return e.get(t)}}};AbstractCodeEditorService=__decorate([__param(0,IThemeService)],AbstractCodeEditorService);export{AbstractCodeEditorService};export class GlobalStyleSheet{constructor(e){this._styleSheet=e}}