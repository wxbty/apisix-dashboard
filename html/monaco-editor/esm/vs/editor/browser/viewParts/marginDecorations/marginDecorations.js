import"./marginDecorations.css";import{DecorationToRender,DedupOverlay}from"../glyphMargin/glyphMargin.js";export class MarginViewLineDecorationsOverlay extends DedupOverlay{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const n=e.getDecorationsInViewport(),r=[];let t=0;for(let s=0,o=n.length;s<o;s++){const e=n[s],o=e.options.marginClassName;o&&(r[t++]=new DecorationToRender(e.range.startLineNumber,e.range.endLineNumber,o))}return r}prepareRender(e){const n=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,t=this._render(n,r,this._getDecorations(e)),s=[];for(let o=n;o<=r;o++){const e=o-n,r=t[e];let i="";for(let n=0,t=r.length;n<t;n++)i+='<div class="cmdr '+r[n]+'" style=""></div>';s[e]=i}this._renderResult=s}render(e,n){return this._renderResult?this._renderResult[n-e]:""}}