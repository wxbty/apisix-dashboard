import"./scrollDecoration.css";import{createFastDomNode}from"../../../../base/browser/fastDomNode.js";import{ViewPart}from"../../view/viewPart.js";import{scrollbarShadow}from"../../../../platform/theme/common/colorRegistry.js";import{registerThemingParticipant}from"../../../../platform/theme/common/themeService.js";export class ScrollDecorationViewPart extends ViewPart{constructor(t){super(t),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const o=this._context.configuration.options,e=o.get(92);this._useShadows=e.useShadows,this._domNode=createFastDomNode(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const t=this._useShadows&&this._scrollTop>0;return this._shouldShow!==t&&(this._shouldShow=t,!0)}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options,o=t.get(131);0===o.minimap.renderMinimap||o.minimap.minimapWidth>0&&0===o.minimap.minimapLeft?this._width=o.width:this._width=o.width-o.minimap.minimapWidth-o.verticalScrollbarWidth}onConfigurationChanged(t){const o=this._context.configuration.options,e=o.get(92);return this._useShadows=e.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(t){return this._scrollTop=t.scrollTop,this._updateShouldShow()}prepareRender(t){}render(t){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}registerThemingParticipant(((t,o)=>{const e=t.getColor(scrollbarShadow);e&&o.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${e} 0 6px 6px -6px inset; }`)}));